<!DOCTYPE  html>
<html>
    <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>我爱打水</title>
    <!--<link rel="stylesheet" href="../../source/css/bootstrap.min.css" />-->
    <!--<link rel="stylesheet" href="../../source/css/test.css" />-->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/test.css">
    <script src="/js/jquery.min.js"></script>
    <!--<script src="/js/canvas.js"></script>-->
    <script src="/js/bootstrap.min.js"></script>
</head>
	<body>
		<header class="header">
    <nav class="nav navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
         			<a href="/" class="navbar-brand">我爱打水</a>
         			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarcollapse">
         				<span class="icon-bar"></span>
         				<span class="icon-bar"></span>
         				<span class="icon-bar"></span>
         			</button>
            </div>
	        <div class="collapse navbar-collapse" id="navbarcollapse">
			    <ul class="nav navbar-nav navbar-right navul">
			        
			            <li class="menu-item">
			            	<a href="/"  class="menu-item-link">
			            		主页
			            	</a>
			            </li>
			        
			            <li class="menu-item">
			            	<a href="/archives"  class="menu-item-link">
			            		归档
			            	</a>
			            </li>
			        
			            <li class="menu-item">
			            	<a href="/tags"  class="menu-item-link">
			            		标签
			            	</a>
			            </li>
			        
			            <li class="menu-item">
			            	<a href="/about"  class="menu-item-link">
			            		关于
			            	</a>
			            </li>
			        
			    </ul>
			</div>
	    </div>
    </nav>	    
</header>
		<canvas id="can" ></canvas>
		<div class="bodyheight">
		   <article class="post container">	
	<div class="post-meta">
		<span class="post-time">
			2017-11-13
		</span>
	</div>
	<div class="post-title">
		<h2 class="title">javascript&lt;二&gt;</h2>
	</div>

	<div class="post-content">
		<p>map 映射 通过键值对来存储数据<br>可通过set,get来添加获取数据<br>var score = new Map();<br>score.set(“cui”,86);<br>score.get(“cui”);  //86<br>score.delete(“cui”);//移除<br>score.has(“cui”);//是否存在</p>
<p>Set  常用做集合=&gt;存储一组不重复的数据<br>var A = new Set();<br>var B = new Set([1,2,3]);<br>var C = new Set([1,2,4,5,5,’5’]);<br>alert(C); //重复元素在Set中自动被过滤：<br>可通过add添加元素<br>C.add(6);<br>C.delete(4);//删除元素</p>
<p>rest  ES6新特性<br>表示参数中剩余的值  rest参数只能写在最后，前面用…标识<br>function restArr(a,b,…rest){<br>    console.log(a);//1<br>    console.log(b);//2<br>    console.log(rest);//3,4,5<br>}<br>restArr(1,2,3,4,5);</p>
<p>JavaScript的函数可以嵌套，此时，内部函数可以访问外部函数定义的变量，反过来则不行<br>function foo() {<br>    var x = 1;<br>    function bar() {<br>        var y = x + 1; // bar可以访问foo的变量x!<br>    }<br>    var z = y + 1; // ReferenceError! foo不可以访问bar的变量y!<br>}</p>
<p>‘use strict’严格模式<br>严格模式下，变量都必须先用var命令声明，然后再使用</p>
<p>解构赋值  ES6新特性<br>将一组对象以结构相同对象的方式存储起来。<br>常用于将两个对象一一映射，获取数据时，不再需要根据下标来获取了<br>var [x,y,z] = [‘I’,’love’,’water’]<br>let [x, [y, z]] = [‘hello’, [‘JavaScript’, ‘ES6’]];</p>
<p>apply</p>
<p>虽然在一个独立的函数调用中，根据是否是strict模式，this指向undefined或window，不过，我们还是可以控制this的指向的！<br>要指定函数的this指向哪个对象，可以用函数本身的apply方法，它接收两个参数，第一个参数就是需要绑定的this变量，第二个参数是Array，表示函数本身的参数。<br>用apply修复getAge()调用：<br>function getAge() {<br>    var y = new Date().getFullYear();<br>    return y - this.birth;<br>}<br>var xiaoming = {<br>    name: ‘小明’,<br>    birth: 1990,<br>    age: getAge<br>};<br>xiaoming.age(); // 25<br>getAge.apply(xiaoming, []); // 25, this指向xiaoming, 参数为空<br>另一个与apply()类似的方法是call()，唯一区别是：<br>apply()把参数打包成Array再传入；<br>call()把参数按顺序传入。</p>
<p>在处理一组数据时，如果需要将数据按一定的方法处理时，可以使用map()来处理，而无需使用for循环语句<br>function pow(x) {<br>    return x * x;<br>}<br>var arr = [1, 2, 3, 4];<br>var newArr = arr.map(pow);<br>console.log(newArr)// // [1, 4, 9, 16]</p>
<p>reduce  常用于将一组数据求和处理<br>var arr = [1,2,3,4];<br>arr.reduce(function(x,y){<br>    return x+y;<br>});<br>有关array的函数还有filter,sort</p>
<p>Date<br>常见的获取系统当前时间的方法如下：<br>var nowTime = new Date();<br>nowTime.getFullYear();//获取年份<br>nowTime.getMonth();//获取月份，注意范围是0-122<br>nowTime.getDate();//获取几号<br>nowTime.getDay();//获取星期几<br>nowTime.getHours();//小时<br>nowTime.getMinutes();//分<br>nowTime.getSeconds();//秒<br>nowTime.getMilliseconds();//毫秒<br>nowTime.getTime();//以number表示的时间戳</p>
<p>正则表达式  一种用来匹配字符串的表达式。<br>创建方法:<br>第一种方式是直接通过/正则表达式/写出来.<br>第二种方式是通过new RegExp(‘正则表达式’)创建一个RegExp对象。<br>var re1 = /ABC-001/<br>var re2 = new RegExp(“ABC\-001”);<br>匹配方法：<br>RegExp对象通过test()来进行匹配<br>var re = /\d{3}-\d{3,8}/;<br>re.test(“072-5200”);</p>

	</div>
</article>
		</div>	
		<div class="nav navbar-default footers">
 	<div class="container footer">
 		<div class="navbar-header">
 			 <span class="navbar-brand">友情连接</span>
 		</div>
 		<ul class="nav navbar-nav">
 			<li>
 				<a href="http://39.108.142.1//myBlog/home.php/home/index/index">斌哥博客</a>
 			</li>
 		</ul>
 	</div>
 </div>
 
		        <script>           
            let can = document.getElementById('can');
            can.width = window.innerWidth;
            can.height = window.innerHeight;
            
            let ctx = can.getContext('2d');
           
           window.requestAnimFrame = (function(){
               return window.requestAnimationFrame||
                          window.webkitRequestAnimationFrame||
                          window.mozRequesAnimationFrame||function(callback){
                                  window.setTimeout(callback,1000/60);
                          }
        
           }) ();
           let lines = [
          " rgba(0,222,255, 0.2)",
           "rgba(0,222,0, 0.2)",
           "rgba(0,0,255, 0.2)"
           ];
           var step = 0;
           function loop(){
               ctx.clearRect(0,0,can.width,can.height);
               for(let i = lines.length-1;i>=0;i--){
                
                    ctx.fillStyle = lines[i];
                    //角度添加一度
                    step++;
                    //角度转换成弧度
                    var angle = (step+i*45)*Math.PI/180;
                    //矩形高度的变化量
                    var deltaHeight   = Math.sin(angle) * 50;
                    var deltaHeightRight   = Math.cos(angle) * 50;
                    ctx.beginPath();
                    //在矩形的左上与右上两个顶点加上高度变化量
                    ctx.moveTo(0, can.height/2+deltaHeight);
                    // ctx.lineTo(can.width, can.height/2+deltaHeightRight);
                    ctx.bezierCurveTo(can.width /2, can.height/2+deltaHeight-50, 
                    can.width / 2, can.height/2+deltaHeightRight-50, can.width, can.height/2+deltaHeightRight);
                    ctx.lineTo(can.width, can.height);
                    ctx.lineTo(0, can.height);
                    ctx.lineTo(0, can.height/2+deltaHeight);
                    ctx.closePath();
                    ctx.fill();
             }
            requestAnimFrame(loop);
           }
           loop(); 
        </script>
	</body>
</html>